<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
  
<mapper namespace="com.hk.conred.Menu">
	<insert id="insertMenu" parameterType="Map">
		INSERT ALL  
		<foreach collection="list" item="item">
			INTO CON_MENU 
			VALUES(get_menu_seq,#{item.store_seq},#{item.category_code},
			#{item.menu_name},#{item.menu_content},#{item.menu_price},#{item.menu_state})
		</foreach>
		SELECT *FROM DUAL
	</insert>
	
	<select id="selectMenu" parameterType="int" resultType="MenuDto">
<!-- 		<![CDATA[ -->
<!-- 			SELECT * -->
<!-- 			FROM CON_MENU -->
<!-- 			WHERE STORE_SEQ=#{store_seq} -->
<!-- 			ORDER BY CATEGORY_CODE  -->
<!-- 		]]> -->
		<![CDATA[
			SELECT *
			FROM CON_MENU cm,CON_CATEGORY cc
			WHERE cm.CATEGORY_CODE =cc.CATEGORY_CODE
			AND STORE_SEQ=#{store_seq}
		]]>
	</select>
	
	<select id="detailMenu" resultType="MenuDto" parameterType="Map">
		SELECT cm.MENU_SEQ ,cm.STORE_SEQ ,cst.STORE_TIME_SEQ ,cm.MENU_NAME ,cm.MENU_CONTENT ,cm.MENU_PRICE ,cs.STORE_MAXMAN, 
		cst.STORE_TIME_DAY ,cst.STORE_TIME_OPEN ,cst.STORE_TIME_CLOSE ,cst.STORE_TIME_BREAK ,rownum
		FROM con_menu cm , CON_STORE cs ,CON_STORE_TIME cst 
		WHERE cm.STORE_SEQ =cs.STORE_SEQ AND cm.STORE_SEQ=cst.STORE_SEQ AND cm.MENU_SEQ =#{menu_seq} AND cm.STORE_SEQ =#{store_seq}
	</select>
</mapper>
	 
	 
	 
	 
	 
	 
	 