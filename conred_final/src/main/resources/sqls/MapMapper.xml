<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="con.hk.conred.Map">
	
<!-- 	맵으로 이동할때 -->
	<select id="searchCateAll" parameterType="String" resultType="SDto">
<!-- 		SELECT cs.STORE_SEQ ,cs.STORE_NAME ,cs.STORE_INTRO_SIMPLE,cs.STORE_STATE,cs.STORE_PHONE, cs.STORE_ADDRESS ,cs.STORE_ADDRESS_DETAIL ,ccm.CATEGORY_CODE -->
<!-- 		FROM CON_STORE_LOCATION csl ,CON_STORE cs, CON_CATEGORY_MAIN ccm  -->
<!-- 		WHERE cs.STORE_SEQ =csl.STORE_SEQ -->
<!-- 		AND cs.STORE_SEQ =ccm.STORE_SEQ -->
<!-- 		AND STORE_LATITUDE BETWEEN #{swlat} AND #{nelat} -->
<!-- 		AND STORE_LONGITUDE BETWEEN #{swlng} AND #{nelng} -->
<!-- 		AND STORE_ADMIN_STATE ='Y' -->

		SELECT cs.store_seq, cs.store_address, ccm.CATEGORY_CODE 
		FROM CON_STORE cs, CON_CATEGORY_MAIN ccm
		WHERE cs.STORE_SEQ = ccm.STORE_SEQ
		AND STORE_ADMIN_STATE ='Y'
	</select>
	
<!-- 	맵으로 이동할때-->
	<select id="searchCate" parameterType="String" resultType="SDto">
		SELECT cs.store_seq, ccm.CATEGORY_CODE 
		FROM CON_STORE cs, CON_CATEGORY_MAIN ccm
		WHERE cs.STORE_SEQ = ccm.STORE_SEQ
		AND ccm.CATEGORY_CODE =#{category_code}
		AND STORE_ADMIN_STATE ='Y'
	</select>
	
	
<!-- 	맵으로 이동할때 -->
	<select id="searchCateAll_ajax" parameterType="String" resultType="SDto">
		SELECT cs.STORE_SEQ ,cs.STORE_NAME ,cs.STORE_INTRO_SIMPLE,cs.STORE_STATE,cs.STORE_PHONE, cs.STORE_ADDRESS ,cs.STORE_ADDRESS_DETAIL ,ccm.CATEGORY_CODE
		FROM CON_STORE_LOCATION csl ,CON_STORE cs, CON_CATEGORY_MAIN ccm 
		WHERE cs.STORE_SEQ =csl.STORE_SEQ
		AND cs.STORE_SEQ =ccm.STORE_SEQ
		AND STORE_LATITUDE BETWEEN #{swlat} AND #{nelat}
		AND STORE_LONGITUDE BETWEEN #{swlng} AND #{nelng}
		AND STORE_ADMIN_STATE ='Y'

<!-- 		SELECT cs.store_seq, cs.store_address, ccm.CATEGORY_CODE  -->
<!-- 		FROM CON_STORE cs, CON_CATEGORY_MAIN ccm -->
<!-- 		WHERE cs.STORE_SEQ = ccm.STORE_SEQ -->
<!-- 		AND STORE_ADMIN_STATE ='Y' -->
	</select>
	
<!-- 	맵으로 이동할때-->
	<select id="searchCate_ajax" parameterType="String" resultType="SDto">
		SELECT cs.STORE_SEQ ,cs.STORE_NAME ,cs.STORE_INTRO_SIMPLE,cs.STORE_STATE,cs.STORE_PHONE, cs.STORE_ADDRESS ,cs.STORE_ADDRESS_DETAIL ,ccm.CATEGORY_CODE
		FROM CON_STORE_LOCATION csl ,CON_STORE cs, CON_CATEGORY_MAIN ccm 
		WHERE cs.STORE_SEQ =csl.STORE_SEQ
		AND cs.STORE_SEQ =ccm.STORE_SEQ
		AND STORE_LATITUDE BETWEEN #{swlat} AND #{nelat}
		AND STORE_LONGITUDE BETWEEN #{swlng} AND #{nelng}
		AND STORE_ADMIN_STATE ='Y'
		AND ccm.CATEGORY_CODE =#{category_code}
	</select>
	
</mapper>